def credentialsId = 'your-credentials-id'  // Replace with your actual credentials ID
def gitBranches = []

// Run 'git ls-remote' to list branches
def branches = sh(
    script: """
    git ls-remote --refs --heads -q https://${credentialsId}@github.com/your/repo.git
    """,
    returnStdout: true
).trim()

branches.eachLine { line ->
    def parts = line.split('\t')
    gitBranches.add(parts[1].replace('refs/heads/', ''))
}

return gitBranches
